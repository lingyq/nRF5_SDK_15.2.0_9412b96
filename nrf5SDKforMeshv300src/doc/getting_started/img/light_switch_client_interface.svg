<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1155px" preserveAspectRatio="none" style="width:925px;height:1155px;" version="1.1" viewBox="0 0 925 1155" width="925px" zoomAndPan="magnify"><defs><filter height="300%" id="f1oz8tyzntryom" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" height="1140.4688" style="stroke: #A80036; stroke-width: 1.0;" width="349" x="110" y="4"/><text fill="#000000" font-family="Arial" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="83" x="243" y="16.0669">Application</text><rect fill="#DDDDDD" height="1140.4688" style="stroke: #A80036; stroke-width: 1.0;" width="163" x="734" y="4"/><rect fill="#FFFFFF" filter="url(#f1oz8tyzntryom)" height="532.2734" style="stroke: #000000; stroke-width: 2.0;" width="809" x="104" y="540.6016"/><rect fill="#FFFFFF" height="357.8047" style="stroke: none; stroke-width: 1.0;" width="809" x="104" y="715.0703"/><rect fill="#FFFFFF" filter="url(#f1oz8tyzntryom)" height="114.5313" style="stroke: #000000; stroke-width: 2.0;" width="621" x="282" y="794.0078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145" x2="145" y1="74.7266" y2="138.9922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="145" x2="145" y1="138.9922" y2="179.7969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145" x2="145" y1="179.7969" y2="354.5938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="145" x2="145" y1="354.5938" y2="395.3984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145" x2="145" y1="395.3984" y2="424.5313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="145" x2="145" y1="424.5313" y2="465.3359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145" x2="145" y1="465.3359" y2="557.7344"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="145" x2="145" y1="557.7344" y2="598.5391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145" x2="145" y1="598.5391" y2="717.0703"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="145" x2="145" y1="717.0703" y2="757.875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145" x2="145" y1="757.875" y2="915.5391"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="145" x2="145" y1="915.5391" y2="956.3438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145" x2="145" y1="956.3438" y2="1089.875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379" x2="379" y1="74.7266" y2="138.9922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="379" x2="379" y1="138.9922" y2="179.7969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379" x2="379" y1="179.7969" y2="354.5938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="379" x2="379" y1="354.5938" y2="395.3984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379" x2="379" y1="395.3984" y2="424.5313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="379" x2="379" y1="424.5313" y2="465.3359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379" x2="379" y1="465.3359" y2="557.7344"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="379" x2="379" y1="557.7344" y2="598.5391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379" x2="379" y1="598.5391" y2="717.0703"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="379" x2="379" y1="717.0703" y2="757.875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379" x2="379" y1="757.875" y2="915.5391"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="379" x2="379" y1="915.5391" y2="956.3438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379" x2="379" y1="956.3438" y2="1089.875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513" x2="513" y1="74.7266" y2="138.9922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="513" x2="513" y1="138.9922" y2="179.7969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513" x2="513" y1="179.7969" y2="354.5938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="513" x2="513" y1="354.5938" y2="395.3984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513" x2="513" y1="395.3984" y2="424.5313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="513" x2="513" y1="424.5313" y2="465.3359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513" x2="513" y1="465.3359" y2="557.7344"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="513" x2="513" y1="557.7344" y2="598.5391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513" x2="513" y1="598.5391" y2="717.0703"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="513" x2="513" y1="717.0703" y2="757.875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513" x2="513" y1="757.875" y2="915.5391"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="513" x2="513" y1="915.5391" y2="956.3438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513" x2="513" y1="956.3438" y2="1089.875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="650" x2="650" y1="74.7266" y2="138.9922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="650" x2="650" y1="138.9922" y2="179.7969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="650" x2="650" y1="179.7969" y2="354.5938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="650" x2="650" y1="354.5938" y2="395.3984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="650" x2="650" y1="395.3984" y2="424.5313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="650" x2="650" y1="424.5313" y2="465.3359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="650" x2="650" y1="465.3359" y2="557.7344"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="650" x2="650" y1="557.7344" y2="598.5391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="650" x2="650" y1="598.5391" y2="717.0703"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="650" x2="650" y1="717.0703" y2="757.875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="650" x2="650" y1="757.875" y2="915.5391"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="650" x2="650" y1="915.5391" y2="956.3438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="650" x2="650" y1="956.3438" y2="1089.875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="815" x2="815" y1="74.7266" y2="138.9922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="815" x2="815" y1="138.9922" y2="179.7969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="815" x2="815" y1="179.7969" y2="354.5938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="815" x2="815" y1="354.5938" y2="395.3984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="815" x2="815" y1="395.3984" y2="424.5313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="815" x2="815" y1="424.5313" y2="465.3359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="815" x2="815" y1="465.3359" y2="557.7344"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="815" x2="815" y1="557.7344" y2="598.5391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="815" x2="815" y1="598.5391" y2="717.0703"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="815" x2="815" y1="717.0703" y2="757.875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="815" x2="815" y1="757.875" y2="915.5391"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="815" x2="815" y1="915.5391" y2="956.3438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="815" x2="815" y1="956.3438" y2="1089.875"/><rect fill="#FEFECE" filter="url(#f1oz8tyzntryom)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="59" x="114" y="39.4297"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="121" y="59.4248">main.c</text><rect fill="#FEFECE" filter="url(#f1oz8tyzntryom)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="59" x="114" y="1088.875"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="121" y="1108.8701">main.c</text><rect fill="#FEFECE" filter="url(#f1oz8tyzntryom)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="147" x="304" y="23.1328"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="133" x="311" y="43.1279">Application support</text><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="347.5" y="59.4248">modules</text><rect fill="#FEFECE" filter="url(#f1oz8tyzntryom)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="147" x="304" y="1088.875"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="133" x="311" y="1108.8701">Application support</text><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="347.5" y="1125.167">modules</text><rect fill="#FEFECE" filter="url(#f1oz8tyzntryom)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="465" y="39.4297"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="472" y="59.4248">Mesh stack</text><rect fill="#FEFECE" filter="url(#f1oz8tyzntryom)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="465" y="1088.875"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="472" y="1108.8701">Mesh stack</text><rect fill="#FEFECE" filter="url(#f1oz8tyzntryom)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="152" x="572" y="39.4297"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="138" x="579" y="59.4248">Generic OnOff client</text><rect fill="#FEFECE" filter="url(#f1oz8tyzntryom)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="152" x="572" y="1088.875"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="138" x="579" y="1108.8701">Generic OnOff client</text><rect fill="#FEFECE" filter="url(#f1oz8tyzntryom)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="738" y="39.4297"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="137" x="745" y="59.4248">Mesh core modules</text><rect fill="#FEFECE" filter="url(#f1oz8tyzntryom)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="738" y="1088.875"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="137" x="745" y="1108.8701">Mesh core modules</text><polygon fill="#FBFB77" filter="url(#f1oz8tyzntryom)" points="8,89.7266,8,129.7266,280,129.7266,280,99.7266,270,89.7266,8,89.7266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="270" x2="270" y1="89.7266" y2="99.7266"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="280" x2="270" y1="99.7266" y2="99.7266"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="14" y="106.7935">init_params defines UUID, core params</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="18" y="121.9263">and event callbacks</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="458" y="163.2026">Initialize</text><polygon fill="#A80036" points="367.5,196.7969,377.5,200.7969,367.5,204.7969,371.5,200.7969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145.5" x2="373.5" y1="200.7969" y2="200.7969"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="152.5" y="195.8638">ble_stack_init()</text><polygon fill="#A80036" points="367.5,225.9297,377.5,229.9297,367.5,233.9297,371.5,229.9297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145.5" x2="373.5" y1="229.9297" y2="229.9297"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="152.5" y="224.9966">gap_params_init()</text><polygon fill="#A80036" points="367.5,255.0625,377.5,259.0625,367.5,263.0625,371.5,259.0625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145.5" x2="373.5" y1="259.0625" y2="259.0625"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="152.5" y="254.1294">conn_params_init()</text><polygon fill="#A80036" points="367.5,284.1953,377.5,288.1953,367.5,292.1953,371.5,288.1953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145.5" x2="373.5" y1="288.1953" y2="288.1953"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="152.5" y="283.2622">mesh_app_uuid_gen(...)</text><polygon fill="#A80036" points="501.5,313.3281,511.5,317.3281,501.5,321.3281,505.5,317.3281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145.5" x2="507.5" y1="317.3281" y2="317.3281"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="152.5" y="312.395">mesh_stack_init(...)</text><polygon fill="#A80036" points="803.5,342.4609,813.5,346.4609,803.5,350.4609,807.5,346.4609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513.5" x2="809.5" y1="346.4609" y2="346.4609"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="520.5" y="341.5278">Initialize: Mesh and Foundation models</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="482.5" y="378.8042"/><polygon fill="#A80036" points="638,412.3984,648,416.3984,638,420.3984,642,416.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145.5" x2="644" y1="416.3984" y2="416.3984"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="198" x="152.5" y="411.4653">generic_onoff_client_init(...) x 2</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="28" x="466.5" y="448.7417">Start</text><polygon fill="#A80036" points="501.5,482.3359,511.5,486.3359,501.5,490.3359,505.5,486.3359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145.5" x2="507.5" y1="486.3359" y2="486.3359"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="152.5" y="481.4028">mesh_stack_start()</text><polygon fill="#FBFB77" filter="url(#f1oz8tyzntryom)" points="426,499.4688,426,524.4688,596,524.4688,596,509.4688,586,499.4688,426,499.4688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="586" x2="586" y1="499.4688" y2="509.4688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="596" x2="586" y1="509.4688" y2="509.4688"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="432" y="516.5356">Start dynamic behavior</text><rect fill="none" height="532.2734" style="stroke: #000000; stroke-width: 2.0;" width="809" x="104" y="540.6016"/><polygon fill="#EEEEEE" points="104,540.6016,168,540.6016,168,547.6016,158,557.6016,104,557.6016,104,540.6016" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="Arial" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="119" y="553.6685">alt</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="98" x="431.5" y="581.9448">Provisioned node</text><polygon fill="#A80036" points="156.5,615.5391,146.5,619.5391,156.5,623.5391,152.5,619.5391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="150.5" x2="649" y1="619.5391" y2="619.5391"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="162.5" y="614.606">onoff_status_cb(...)</text><polygon fill="#A80036" points="156.5,644.6719,146.5,648.6719,156.5,652.6719,152.5,648.6719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="150.5" x2="649" y1="648.6719" y2="648.6719"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="162.5" y="643.7388">ack_transaction_status_cb(...)</text><polygon fill="#A80036" points="156.5,673.8047,146.5,677.8047,156.5,681.8047,152.5,677.8047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="150.5" x2="649" y1="677.8047" y2="677.8047"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="162.5" y="672.8716">periodic_publish_cb(...)</text><polygon fill="#A80036" points="638,702.9375,648,706.9375,638,710.9375,642,706.9375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145.5" x2="644" y1="706.9375" y2="706.9375"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="245" x="152.5" y="702.0044">generic_onoff_client_set/set_unack(...)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="104" x2="913" y1="716.0703" y2="716.0703"/><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="121" x="420" y="741.2808">Unprovisioned device</text><polygon fill="#A80036" points="367.5,774.875,377.5,778.875,367.5,782.875,371.5,778.875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145.5" x2="373.5" y1="778.875" y2="778.875"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="152.5" y="773.9419">mesh_provisionee_prov_start(...)</text><rect fill="none" height="114.5313" style="stroke: #000000; stroke-width: 2.0;" width="621" x="282" y="794.0078"/><polygon fill="#EEEEEE" points="282,794.0078,478,794.0078,478,801.0078,468,811.0078,282,811.0078,282,794.0078" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="Arial" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="151" x="297" y="807.0747">Initialize provisionee</text><polygon fill="#FBFB77" filter="url(#f1oz8tyzntryom)" points="292,816.1406,292,841.1406,462,841.1406,462,826.1406,452,816.1406,292,816.1406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="452" x2="452" y1="816.1406" y2="826.1406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="462" x2="452" y1="826.1406" y2="826.1406"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="298" y="833.2075">Define OOB capabilities</text><polygon fill="#A80036" points="803.5,867.2734,813.5,871.2734,803.5,875.2734,807.5,871.2734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379.5" x2="809.5" y1="871.2734" y2="871.2734"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="386.5" y="866.3403">Start unprovisioned device beacon</text><polygon fill="#A80036" points="803.5,896.4063,813.5,900.4063,803.5,904.4063,807.5,900.4063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379.5" x2="809.5" y1="900.4063" y2="900.4063"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="386.5" y="895.4731">Listen for provisioning invite</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="187" x="387" y="939.7495">Wait for provisioning to complete</text><polygon fill="#A80036" points="390.5,973.3438,380.5,977.3438,390.5,981.3438,386.5,977.3438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="384.5" x2="814.5" y1="977.3438" y2="977.3438"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="396.5" y="972.4106">Provisioning Events</text><polygon fill="#A80036" points="156.5,1002.4766,146.5,1006.4766,156.5,1010.4766,152.5,1006.4766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="150.5" x2="378.5" y1="1006.4766" y2="1006.4766"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="162.5" y="1001.5435">provisioning_complete_cb()</text><polygon fill="#A80036" points="367.5,1031.6094,377.5,1035.6094,367.5,1039.6094,371.5,1035.6094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145.5" x2="373.5" y1="1035.6094" y2="1035.6094"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="152.5" y="1030.6763">gap_params_init()</text><polygon fill="#A80036" points="367.5,1060.7422,377.5,1064.7422,367.5,1068.7422,371.5,1064.7422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145.5" x2="373.5" y1="1064.7422" y2="1064.7422"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="152.5" y="1059.8091">conn_params_init()</text><!--
@startuml
skinparam defaultFontName Arial
box "Application" #FFFFFF
participant a as "main.c"
participant ah as "Application support\nmodules"
end box
participant c as "Mesh stack"
participant s as "Generic OnOff client"
box
participant core as "Mesh core modules"
end box

note over a: init_params defines UUID, core params\n and event callbacks
... Initialize ...
a -> ah: ble_stack_init()
a -> ah: gap_params_init()
a -> ah: conn_params_init()
a -> ah: mesh_app_uuid_gen(...)
a -> c: mesh_stack_init(...)
c -> core: Initialize: Mesh and Foundation models
... ...
a -> s: generic_onoff_client_init(...) x 2
... Start ...
a -> c: mesh_stack_start()
note over c: Start dynamic behavior


alt
    ... Provisioned node ...
    a <- s: onoff_status_cb(...)
    a <- s: ack_transaction_status_cb(...)
    a <- s: periodic_publish_cb(...)
    a -> s: generic_onoff_client_set/set_unack(...)
else
    ... Unprovisioned device ...
    a -> ah: mesh_provisionee_prov_start(...)
    group Initialize provisionee
    note over ah: Define OOB capabilities
    ah -> core: Start unprovisioned device beacon
    ah -> core: Listen for provisioning invite
    end
    ... Wait for provisioning to complete ...
    core -> ah: Provisioning Events
    ah -> a: provisioning_complete_cb()
    a -> ah: gap_params_init()
    a -> ah: conn_params_init()
end

@enduml

PlantUML version 1.2017.15(Mon Jul 03 18:45:34 CEST 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_181-b13
Operating System: Linux
OS Version: 4.15.0-38-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>