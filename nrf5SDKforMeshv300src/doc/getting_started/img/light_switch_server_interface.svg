<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1184px" preserveAspectRatio="none" style="width:935px;height:1184px;" version="1.1" viewBox="0 0 935 1184" width="935px" zoomAndPan="magnify"><defs><filter height="300%" id="fhleclig44brm" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" height="1169.6016" style="stroke: #A80036; stroke-width: 1.0;" width="349" x="110" y="4"/><text fill="#000000" font-family="Arial" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="83" x="243" y="16.0669">Application</text><rect fill="#DDDDDD" height="1169.6016" style="stroke: #A80036; stroke-width: 1.0;" width="163" x="744.5" y="4"/><rect fill="#FFFFFF" filter="url(#fhleclig44brm)" height="532.2734" style="stroke: #000000; stroke-width: 2.0;" width="819.5" x="104" y="569.7344"/><rect fill="#FFFFFF" height="357.8047" style="stroke: none; stroke-width: 1.0;" width="819.5" x="104" y="744.2031"/><rect fill="#FFFFFF" filter="url(#fhleclig44brm)" height="114.5313" style="stroke: #000000; stroke-width: 2.0;" width="631.5" x="282" y="823.1406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145" x2="145" y1="74.7266" y2="138.9922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="145" x2="145" y1="138.9922" y2="179.7969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145" x2="145" y1="179.7969" y2="354.5938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="145" x2="145" y1="354.5938" y2="395.3984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145" x2="145" y1="395.3984" y2="453.6641"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="145" x2="145" y1="453.6641" y2="494.4688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145" x2="145" y1="494.4688" y2="586.8672"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="145" x2="145" y1="586.8672" y2="627.6719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145" x2="145" y1="627.6719" y2="746.2031"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="145" x2="145" y1="746.2031" y2="787.0078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145" x2="145" y1="787.0078" y2="944.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="145" x2="145" y1="944.6719" y2="985.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145" x2="145" y1="985.4766" y2="1119.0078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379" x2="379" y1="74.7266" y2="138.9922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="379" x2="379" y1="138.9922" y2="179.7969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379" x2="379" y1="179.7969" y2="354.5938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="379" x2="379" y1="354.5938" y2="395.3984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379" x2="379" y1="395.3984" y2="453.6641"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="379" x2="379" y1="453.6641" y2="494.4688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379" x2="379" y1="494.4688" y2="586.8672"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="379" x2="379" y1="586.8672" y2="627.6719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379" x2="379" y1="627.6719" y2="746.2031"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="379" x2="379" y1="746.2031" y2="787.0078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379" x2="379" y1="787.0078" y2="944.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="379" x2="379" y1="944.6719" y2="985.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379" x2="379" y1="985.4766" y2="1119.0078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513" x2="513" y1="74.7266" y2="138.9922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="513" x2="513" y1="138.9922" y2="179.7969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513" x2="513" y1="179.7969" y2="354.5938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="513" x2="513" y1="354.5938" y2="395.3984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513" x2="513" y1="395.3984" y2="453.6641"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="513" x2="513" y1="453.6641" y2="494.4688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513" x2="513" y1="494.4688" y2="586.8672"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="513" x2="513" y1="586.8672" y2="627.6719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513" x2="513" y1="627.6719" y2="746.2031"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="513" x2="513" y1="746.2031" y2="787.0078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513" x2="513" y1="787.0078" y2="944.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="513" x2="513" y1="944.6719" y2="985.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513" x2="513" y1="985.4766" y2="1119.0078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="657.5" x2="657.5" y1="74.7266" y2="138.9922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="657.5" x2="657.5" y1="138.9922" y2="179.7969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="657.5" x2="657.5" y1="179.7969" y2="354.5938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="657.5" x2="657.5" y1="354.5938" y2="395.3984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="657.5" x2="657.5" y1="395.3984" y2="453.6641"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="657.5" x2="657.5" y1="453.6641" y2="494.4688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="657.5" x2="657.5" y1="494.4688" y2="586.8672"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="657.5" x2="657.5" y1="586.8672" y2="627.6719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="657.5" x2="657.5" y1="627.6719" y2="746.2031"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="657.5" x2="657.5" y1="746.2031" y2="787.0078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="657.5" x2="657.5" y1="787.0078" y2="944.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="657.5" x2="657.5" y1="944.6719" y2="985.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="657.5" x2="657.5" y1="985.4766" y2="1119.0078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="825.5" x2="825.5" y1="74.7266" y2="138.9922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="825.5" x2="825.5" y1="138.9922" y2="179.7969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="825.5" x2="825.5" y1="179.7969" y2="354.5938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="825.5" x2="825.5" y1="354.5938" y2="395.3984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="825.5" x2="825.5" y1="395.3984" y2="453.6641"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="825.5" x2="825.5" y1="453.6641" y2="494.4688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="825.5" x2="825.5" y1="494.4688" y2="586.8672"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="825.5" x2="825.5" y1="586.8672" y2="627.6719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="825.5" x2="825.5" y1="627.6719" y2="746.2031"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="825.5" x2="825.5" y1="746.2031" y2="787.0078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="825.5" x2="825.5" y1="787.0078" y2="944.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="825.5" x2="825.5" y1="944.6719" y2="985.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="825.5" x2="825.5" y1="985.4766" y2="1119.0078"/><rect fill="#FEFECE" filter="url(#fhleclig44brm)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="59" x="114" y="39.4297"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="121" y="59.4248">main.c</text><rect fill="#FEFECE" filter="url(#fhleclig44brm)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="59" x="114" y="1118.0078"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="121" y="1138.0029">main.c</text><rect fill="#FEFECE" filter="url(#fhleclig44brm)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="147" x="304" y="23.1328"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="133" x="311" y="43.1279">Application support</text><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="347.5" y="59.4248">modules</text><rect fill="#FEFECE" filter="url(#fhleclig44brm)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="147" x="304" y="1118.0078"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="133" x="311" y="1138.0029">Application support</text><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="347.5" y="1154.2998">modules</text><rect fill="#FEFECE" filter="url(#fhleclig44brm)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="465" y="39.4297"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="472" y="59.4248">Mesh stack</text><rect fill="#FEFECE" filter="url(#fhleclig44brm)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="465" y="1118.0078"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="472" y="1138.0029">Mesh stack</text><rect fill="#FEFECE" filter="url(#fhleclig44brm)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="158" x="576.5" y="39.4297"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="144" x="583.5" y="59.4248">Generic OnOff server</text><rect fill="#FEFECE" filter="url(#fhleclig44brm)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="158" x="576.5" y="1118.0078"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="144" x="583.5" y="1138.0029">Generic OnOff server</text><rect fill="#FEFECE" filter="url(#fhleclig44brm)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="748.5" y="39.4297"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="137" x="755.5" y="59.4248">Mesh core modules</text><rect fill="#FEFECE" filter="url(#fhleclig44brm)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="748.5" y="1118.0078"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="137" x="755.5" y="1138.0029">Mesh core modules</text><polygon fill="#FBFB77" filter="url(#fhleclig44brm)" points="8,89.7266,8,129.7266,280,129.7266,280,99.7266,270,89.7266,8,89.7266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="270" x2="270" y1="89.7266" y2="99.7266"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="280" x2="270" y1="99.7266" y2="99.7266"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="14" y="106.7935">init_params defines UUID, core params</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="18" y="121.9263">and event callbacks</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="463.25" y="163.2026">Initialize</text><polygon fill="#A80036" points="367.5,196.7969,377.5,200.7969,367.5,204.7969,371.5,200.7969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145.5" x2="373.5" y1="200.7969" y2="200.7969"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="152.5" y="195.8638">ble_stack_init()</text><polygon fill="#A80036" points="367.5,225.9297,377.5,229.9297,367.5,233.9297,371.5,229.9297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145.5" x2="373.5" y1="229.9297" y2="229.9297"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="152.5" y="224.9966">gap_params_init()</text><polygon fill="#A80036" points="367.5,255.0625,377.5,259.0625,367.5,263.0625,371.5,259.0625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145.5" x2="373.5" y1="259.0625" y2="259.0625"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="152.5" y="254.1294">conn_params_init()</text><polygon fill="#A80036" points="367.5,284.1953,377.5,288.1953,367.5,292.1953,371.5,288.1953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145.5" x2="373.5" y1="288.1953" y2="288.1953"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="152.5" y="283.2622">mesh_app_uuid_gen()</text><polygon fill="#A80036" points="501.5,313.3281,511.5,317.3281,501.5,321.3281,505.5,317.3281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145.5" x2="507.5" y1="317.3281" y2="317.3281"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="152.5" y="312.395">mesh_stack_init(...)</text><polygon fill="#A80036" points="814,342.4609,824,346.4609,814,350.4609,818,346.4609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513.5" x2="820" y1="346.4609" y2="346.4609"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="520.5" y="341.5278">Initialize: Mesh and Foundation models</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="487.75" y="378.8042"/><polygon fill="#A80036" points="367.5,412.3984,377.5,416.3984,367.5,420.3984,371.5,416.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145.5" x2="373.5" y1="416.3984" y2="416.3984"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="152.5" y="411.4653">app_onoff_init(...)</text><polygon fill="#A80036" points="645.5,441.5313,655.5,445.5313,645.5,449.5313,649.5,445.5313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379.5" x2="651.5" y1="445.5313" y2="445.5313"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="386.5" y="440.5981">generic_onoff_server_init(...)</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="28" x="471.75" y="477.8745">Start</text><polygon fill="#A80036" points="501.5,511.4688,511.5,515.4688,501.5,519.4688,505.5,515.4688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145.5" x2="507.5" y1="515.4688" y2="515.4688"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="152.5" y="510.5356">mesh_stack_start()</text><polygon fill="#FBFB77" filter="url(#fhleclig44brm)" points="426,528.6016,426,553.6016,596,553.6016,596,538.6016,586,528.6016,426,528.6016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="586" x2="586" y1="528.6016" y2="538.6016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="596" x2="586" y1="538.6016" y2="538.6016"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="432" y="545.6685">Start dynamic behavior</text><rect fill="none" height="532.2734" style="stroke: #000000; stroke-width: 2.0;" width="819.5" x="104" y="569.7344"/><polygon fill="#EEEEEE" points="104,569.7344,168,569.7344,168,576.7344,158,586.7344,104,586.7344,104,569.7344" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="Arial" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="119" y="582.8013">alt</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="98" x="436.75" y="611.0776">Provisioned node</text><polygon fill="#A80036" points="390.5,644.6719,380.5,648.6719,390.5,652.6719,386.5,648.6719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="384.5" x2="656.5" y1="648.6719" y2="648.6719"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="396.5" y="643.7388">Model APIs: get_cb(...), set_cb(...)</text><polygon fill="#A80036" points="156.5,673.8047,146.5,677.8047,156.5,681.8047,152.5,677.8047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="150.5" x2="378.5" y1="677.8047" y2="677.8047"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="162.5" y="672.8716">app_onoff_get/set_cb(...)</text><polygon fill="#A80036" points="367.5,702.9375,377.5,706.9375,367.5,710.9375,371.5,706.9375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145.5" x2="373.5" y1="706.9375" y2="706.9375"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="152.5" y="702.0044">app_onoff_status_publish(...)</text><polygon fill="#A80036" points="645.5,732.0703,655.5,736.0703,645.5,740.0703,649.5,736.0703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379.5" x2="651.5" y1="736.0703" y2="736.0703"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="254" x="386.5" y="731.1372">generic_onoff_server_status_publish(...)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="104" x2="923.5" y1="745.2031" y2="745.2031"/><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="121" x="425.25" y="770.4136">Unprovisioned device</text><polygon fill="#A80036" points="367.5,804.0078,377.5,808.0078,367.5,812.0078,371.5,808.0078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145.5" x2="373.5" y1="808.0078" y2="808.0078"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="152.5" y="803.0747">mesh_provisionee_prov_start(...)</text><rect fill="none" height="114.5313" style="stroke: #000000; stroke-width: 2.0;" width="631.5" x="282" y="823.1406"/><polygon fill="#EEEEEE" points="282,823.1406,478,823.1406,478,830.1406,468,840.1406,282,840.1406,282,823.1406" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="Arial" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="151" x="297" y="836.2075">Initialize provisionee</text><polygon fill="#FBFB77" filter="url(#fhleclig44brm)" points="292,845.2734,292,870.2734,462,870.2734,462,855.2734,452,845.2734,292,845.2734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="452" x2="452" y1="845.2734" y2="855.2734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="462" x2="452" y1="855.2734" y2="855.2734"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="298" y="862.3403">Define OOB capabilities</text><polygon fill="#A80036" points="814,896.4063,824,900.4063,814,904.4063,818,900.4063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379.5" x2="820" y1="900.4063" y2="900.4063"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="386.5" y="895.4731">Start unprovisioned device beacon</text><polygon fill="#A80036" points="814,925.5391,824,929.5391,814,933.5391,818,929.5391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379.5" x2="820" y1="929.5391" y2="929.5391"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="386.5" y="924.606">Listen for provisioning invite</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="187" x="392.25" y="968.8823">Wait for provisioning to complete</text><polygon fill="#A80036" points="390.5,1002.4766,380.5,1006.4766,390.5,1010.4766,386.5,1006.4766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="384.5" x2="825" y1="1006.4766" y2="1006.4766"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="396.5" y="1001.5435">Provisioning Events</text><polygon fill="#A80036" points="156.5,1031.6094,146.5,1035.6094,156.5,1039.6094,152.5,1035.6094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="150.5" x2="378.5" y1="1035.6094" y2="1035.6094"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="162.5" y="1030.6763">provisioning_complete_cb()</text><polygon fill="#A80036" points="367.5,1060.7422,377.5,1064.7422,367.5,1068.7422,371.5,1064.7422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145.5" x2="373.5" y1="1064.7422" y2="1064.7422"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="152.5" y="1059.8091">gap_params_init()</text><polygon fill="#A80036" points="367.5,1089.875,377.5,1093.875,367.5,1097.875,371.5,1093.875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="145.5" x2="373.5" y1="1093.875" y2="1093.875"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="152.5" y="1088.9419">conn_params_init()</text><!--
@startuml
skinparam defaultFontName Arial
box "Application" #FFFFFF
participant a as "main.c"
participant ah as "Application support\nmodules"
end box
participant c as "Mesh stack"
participant s as "Generic OnOff server"
box
participant core as "Mesh core modules"
end box

note over a: init_params defines UUID, core params\n and event callbacks
... Initialize ...
a -> ah: ble_stack_init()
a -> ah: gap_params_init()
a -> ah: conn_params_init()
a -> ah: mesh_app_uuid_gen()
a -> c: mesh_stack_init(...)
c -> core: Initialize: Mesh and Foundation models
... ...
a -> ah: app_onoff_init(...)
ah -> s: generic_onoff_server_init(...)
... Start ...
a -> c: mesh_stack_start()
note over c: Start dynamic behavior


alt
    ... Provisioned node ...
    ah <- s: Model APIs: get_cb(...), set_cb(...)
    a <- ah: app_onoff_get/set_cb(...)
    a -> ah: app_onoff_status_publish(...)
    ah -> s: generic_onoff_server_status_publish(...)

else
    ... Unprovisioned device ...
    a -> ah: mesh_provisionee_prov_start(...)
    group Initialize provisionee
    note over ah: Define OOB capabilities
    ah -> core: Start unprovisioned device beacon
    ah -> core: Listen for provisioning invite
    end
    ... Wait for provisioning to complete ...
    core -> ah: Provisioning Events
    ah -> a: provisioning_complete_cb()
    a -> ah: gap_params_init()
    a -> ah: conn_params_init()
end

@enduml

PlantUML version 1.2017.15(Mon Jul 03 18:45:34 CEST 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_181-b13
Operating System: Linux
OS Version: 4.15.0-38-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>